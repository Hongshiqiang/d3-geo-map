!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";var r={extend:function(t){_.merge(r,t)}};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=100,a=function(){function t(){r(this,t)}return o(t,[{key:"resize",value:function(){}},{key:"mouseover",value:function(){}},{key:"mouseout",value:function(){}},{key:"click",value:function(){}},{key:"GenId",value:function(){return++i}}]),t}();t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),a=null,l=[],s=["china","hubei","wuhan"],u="china",c=window.location.href.split("?area=");2==c.length&&_.indexOf(s,c[1])>=0&&(u=c[1]);var f=function(){function t(){r(this,t),this.AREA=u}return o(t,[{key:"switchMap",value:function(t){window.location.href="?area="+t}},{key:"setBars",value:function(){var t=_.sampleSize(l,_.random(1,l.length-1)),e=[];t.map(function(t){e.push({area:t,count:_.random(0,1e4)})}),a.setBars(e)}},{key:"clearBars",value:function(){a.setBars([])}},{key:"setLines",value:function(){for(var t=[],e=0,n=_.random(5,20);e<n;e++){var r=_.sampleSize(l,2);t.push({from:r[0],to:r[1],data:_.random(1e4)})}a.setLines(t)}},{key:"clearLines",value:function(){a.setLines([])}},{key:"setColors",value:function(){var t=_.sampleSize(l,_.random(1,l.length-1)),e=[];t.map(function(t){e.push({area:t,fill:_.sample(d3.schemeCategory20)})}),a.setColors(e)}},{key:"clearColors",value:function(){a.setColors([])}},{key:"setPoints",value:function(){a.setPoints(_.sampleSize(l,_.random(1,l.length-1)))}},{key:"flyArea",value:function(){var t=_.sampleSize(l,2);a.fly(t[0],t[1])}},{key:"flyRandom",value:function(){var t=document.getElementById("container"),e=[t.clientWidth,t.clientHeight],n=e[0],r=e[1];a.fly([_.random(0,n),_.random(0,r)],[_.random(0,n),_.random(0,r)])}}]),t}(),p=new f;d3.json("/data/"+u+".json",function(t){a=new i(t,document.getElementById("container"),{Bar:{OnMouserOver:function(t){a.showTip(t.area+" : "+t.count)},OnMouserOut:function(t){a.hideTip()},OnClick:function(t){console.log(t,"clicked")}},Lines:{OnMouserOver:function(t){a.showTip(t.from+" -> "+t.to+" : "+t.data)},OnMouserOut:function(t){a.hideTip()},OnClick:function(t){console.log(t,"clicked")}},Fly:{EffectMin:1e3,EffectMax:2e3},OnSelect:function(t){a.setPoints([t])}}),t.features.map(function(t){l.push(t.properties.name)});var e=new dat.GUI;e.add(p,"AREA",{"中国":"china","湖北":"hubei","武汉":"wuhan"}).onChange(p.switchMap),e.add(p,"setBars"),e.add(p,"clearBars"),e.add(p,"setLines"),e.add(p,"clearLines"),e.add(p,"flyArea"),e.add(p,"flyRandom"),e.add(p,"setColors"),e.add(p,"clearColors"),e.add(p,"setPoints"),document.getElementById("container").addEventListener("click",function(t){var e=_.sample(l);a.fly([t.offsetX,t.offsetY],e,function(){a.showTip(e,e)})},!1)})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(4);var i=n(9),a=n(0),l=n(10),s=n(11),u=n(12),c=n(13),f=n(14),p=n(15),d={x:0,y:0,k:0,ix:0,iy:0};a.extend({GLOBAL_SVG:null,GLOBAL_BUILDER:null,GLOBAL_PROJECTION:null,RotateX:30,Zoom:!0,Shadow:{Left:5,Top:5,Fill:""},Bar:{Effect:2e3,HeightMin:10,HeightMax:60,Width:8,Radius:2},Line:{EffectMin:2e3,EffectMax:4e3,PointRadius:1.5},Point:{EffectMin:2e3,EffectMax:4e3,RadiusMin:8,RadiusMax:16},Fly:{EffectMin:2e3,EffectMax:4e3},OnSelect:null});var v,h,y,L,O,m,g=function(){function t(e,n,o){r(this,t),a.extend(o);var l=[n,n.clientWidth,n.clientHeight];v=l[0],y=l[1],L=l[2],O=Math.cos(2*Math.PI*a.RotateX/360),m=L/O,a.GLOBAL_BUILDER=new s(e,n),h=d3.select(n).append("div").attr("class","v-map").attr("style","width:"+y+"px;height:"+m+"px;margin-top:"+(L-m)/2+"px;transform: rotateX("+a.RotateX+"deg);"),a.GLOBAL_SVG=h.append("svg").attr("width",y).attr("height",m),a.GLOBAL_SVG.append("defs").html(i),this._init(e)}return o(t,[{key:"_init",value:function(t){var e=this,n=a.GLOBAL_BUILDER.getCenter(),r=a.GLOBAL_BUILDER.getFullScale();if(a.Shadow){var o=d3.geoMercator().center(n).scale(r).translate([y/2+a.Shadow.Left,m/2+a.Shadow.Top]),i=d3.geoPath().projection(o);a.GLOBAL_SVG.append("g").attr("class","v-group-background").selectAll("path.v-item-background").data(t.features).enter().append("path").attr("class","v-item-background").attr("d",i)}var s=a.GLOBAL_SVG.append("g").attr("class","v-group");a.GLOBAL_PROJECTION=d3.geoMercator().center(n).scale(r).translate([y/2,m/2]);var u=d3.geoPath().projection(a.GLOBAL_PROJECTION),c=s.selectAll("g.v-item").data(t.features).enter().append("g").attr("id",function(t){return"_area_"+t.properties.adcode||t.properties.id||t.properties.name}).attr("class","v-item");c.append("path").attr("class","v-area").attr("d",u),c.append("text").attr("class","v-label").attr("x",function(t){return a.GLOBAL_PROJECTION(a.GLOBAL_BUILDER.getPoint(t.properties.name))[0]}).attr("y",function(t){return a.GLOBAL_PROJECTION(a.GLOBAL_BUILDER.getPoint(t.properties.name))[1]+5}).text(function(t){return t.properties.name}),c.on("mouseover",function(t){var e='\n                <h2 class="custom">'+t.properties.name+"</h2>\n            ";l.show(e)}).on("mouseout",function(){return l.hide()}).on("click",function(t){c.classed("v-item-selected",!1),d3.select(this).classed("v-item-selected",!0)}),_.isFunction(a.OnSelect)&&c.on("click",function(t){var e=t.properties.name,n=a.GLOBAL_BUILDER.getId(e);a.GLOBAL_SVG.selectAll("g.v-item").classed("v-item-selected",!1),a.GLOBAL_SVG.selectAll("g#_area_"+n).classed("v-item-selected",!0),a.OnSelect.call(null,e)}),window.addEventListener("resize",function(){e._resize()}),a.Zoom&&a.GLOBAL_SVG.call(d3.zoom().on("zoom",e._zoom))}},{key:"_resize",value:function(){var t=[v.clientWidth,v.clientHeight];y=t[0],L=t[1],m=L/O,h.attr("style","width:"+y+"px;height:"+m+"px;margin-top:"+(L-m)/2+"px;transform: rotateX("+a.RotateX+"deg);"),a.GLOBAL_SVG.attr("width",y).attr("height",m);var e=a.GLOBAL_BUILDER.getCenter(),n=a.GLOBAL_BUILDER.getFullScale();a.GLOBAL_PROJECTION=d3.geoMercator().center(e).scale(n).translate([y/2,m/2]);var r=d3.geoPath().projection(a.GLOBAL_PROJECTION);if(a.GLOBAL_SVG.selectAll("path.v-area").attr("d",r),a.GLOBAL_SVG.selectAll("text.v-label").attr("x",function(t){return a.GLOBAL_PROJECTION(a.GLOBAL_BUILDER.getPoint(t.properties.name))[0]}).attr("y",function(t){return a.GLOBAL_PROJECTION(a.GLOBAL_BUILDER.getPoint(t.properties.name))[1]+5}),a.Shadow){var o=d3.geoMercator().center(e).scale(n).translate([y/2+a.Shadow.Left,m/2+a.Shadow.Top]),i=d3.geoPath().projection(o);a.GLOBAL_SVG.selectAll("path.v-item-background").attr("d",i)}u.resize(),c.resize(),f.resize(),p.resize()}},{key:"_zoom",value:function(){var t=d3.event.transform;t.k==d.k?(d.x+=t.x-d.ix,d.y+=t.y-d.iy):(d.k=t.k,d.ix=t.x,d.iy=t.y),a.GLOBAL_SVG.attr("transform","translate("+d.x+","+d.y+") scale("+d.k+")")}},{key:"setBars",value:function(t){u.setData(t)}},{key:"setLines",value:function(t){c.setData(t)}},{key:"setPoints",value:function(t){f.setData(t)}},{key:"setColors",value:function(t){a.GLOBAL_SVG.selectAll("path.v-area").attr("style",";"),t.map(function(t){var e=a.GLOBAL_BUILDER.getId(t.area);a.GLOBAL_SVG.select("#_area_"+e+" .v-area").attr("style","fill:"+t.fill)})}},{key:"fly",value:function(t,e,n){p.fly(t,e,n)}},{key:"showTip",value:function(t,e){if(_.isString(e)){var n=a.GLOBAL_PROJECTION(a.GLOBAL_BUILDER.getPoint(e)),r=v.getBoundingClientRect();l.showBy(r.x+n[0],r.y+n[1]*O,t)}else l.show(t)}},{key:"hideTip",value:function(){l.hide()}}]),t}();t.exports=g},function(t,e,n){var r=n(5);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0};o.transform=void 0;n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(6)(void 0),e.push([t.i,".v-map g.v-group-background{pointer-events:none}.v-map g.v-group-background path{fill:rgba(57,109,130,.25)}.v-map g.v-item .v-area{stroke-width:.1;stroke:#ccc;fill:rgba(0,0,0,.4)}.v-map g.v-item .v-label{fill:hsla(0,0%,100%,.3);text-anchor:middle;font-size:10px}.v-map g.v-item:hover .v-area{fill:rgba(255,0,0,.6)}.v-map g.v-item:hover .v-label{fill:hsla(0,0%,100%,.8)}.v-map g.v-item-selected .v-area{stroke-width:.5;filter:url(#f-shadow)}.v-map .v-bar{cursor:pointer;fill:url(#f-bar);fill-opacity:.5}.v-map .v-bar:hover{fill:url(#f-bar-hover);fill-opacity:.8}.v-map .v-line{cursor:pointer;stroke-width:.4;stroke:url(#f-line);fill:transparent}.v-map .v-line-point{stroke:url(#f-line-point)}.v-map .v-fly-line{stroke:url(#f-fly);fill:transparent}.v-map .v-point{fill:url(#f-point);pointer-events:none}",""])},function(t,e){function n(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=r(o);return[n].concat(o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"})).concat([i]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=v[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],e))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(c(r.parts[i],e));v[r.id]={id:r.id,refs:1,parts:a}}}}function o(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],l=i[1],s=i[2],u=i[3],c={css:l,media:s,sourceMap:u};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}function i(t,e){var n=y(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=m[m.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),m.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=y(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=m.indexOf(t);e>=0&&m.splice(e,1)}function l(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),i(t,e),e}function s(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),i(t,e),e}function u(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function c(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var u=O++;n=L||(L=l(e)),r=f.bind(null,n,u,!1),o=f.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),r=d.bind(null,n,e),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(e),r=p.bind(null,n),o=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}function f(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function p(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=g(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}var v={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),y=function(t){var e={};return function(n){if(void 0===e[n]){var r=t.call(this,n);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[n]=r}return e[n]}}(function(t){return document.querySelector(t)}),L=null,O=0,m=[],g=n(8);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=h()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=o(t,e);return r(n,e),function(t){for(var i=[],a=0;a<n.length;a++){var l=n[a],s=v[l.id];s.refs--,i.push(s)}if(t){r(o(t,e),e)}for(var a=0;a<i.length;a++){var s=i[a];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete v[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return t;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(t,e){t.exports=' <lineargradient id=f-bar x1=0% y1=100% x2=0% y2=0%> <stop offset=0% stop-color=#02CBFE></stop> <stop offset=100% stop-color=#0D365D></stop> </lineargradient> <lineargradient id=f-bar-hover x1=0% y1=100% x2=0% y2=0%> <stop offset=0% stop-color=#C94BC3></stop> <stop offset=100% stop-color=#0D365D></stop> </lineargradient> <lineargradient id=f-line gradientunits=objectBoundingBox> <stop offset=0 stop-color=transparent /> <stop offset=.33 stop-color=#A17095 /> <stop offset=.67 stop-color=#D04DC1 /> <stop offset=1 stop-color=#D1EACC /> </lineargradient> <radialgradient id=f-line-point> <stop offset=0% style=stop-color:transparent /> <stop offset=40% style=stop-color:#ff7770 /> <stop offset=100% style=stop-color:#d1f9d6 /> </radialgradient> <lineargradient id=f-fly gradientunits=objectBoundingBox> <stop offset=0 stop-color=#0e374f /> <stop offset=.33 stop-color=#069a2b /> <stop offset=.67 stop-color=#d6f252 /> <stop offset=1 stop-color=#ffffff /> </lineargradient> <radialgradient id=f-point> <stop offset=0% style=stop-color:transparent /> <stop offset=40% style=stop-color:transparent /> <stop offset=100% style=stop-color:#00f6ff /> </radialgradient> <filter id=f-shadow> <fecolormatrix type=matrix values="\r\n    0 0 0 0 0\r\n    0 0 0 .8 0\r\n    0 0 0 .8 0\r\n    0 0 0 0.5 0\r\n  "></fecolormatrix> <fegaussianblur stddeviation=1 result=colorBlur1></fegaussianblur> <feoffset result=offsetBlur0 in=colorBlur1 dx=1 dy=1 /> <feoffset result=offsetBlur1 in=colorBlur1 dx=3 dy=3 /> <feoffset result=offsetBlur2 in=colorBlur1 dx=5 dy=5 /> <fespecularlighting in=SourceGraphic lighting-color=#ffb8b8 surfacescale=1 specularconstant=1 specularexponent=115 result=light> <fedistantlight elevation=1 azimuth=1></fedistantlight> </fespecularlighting> <fecomposite in=light in2=SourceGraphic operator=in result=light-effect></fecomposite> <feblend in=light in2=SourceGraphic mode=screen></feblend> <femerge> <femergenode in=offsetBlur0 /> <femergenode in=offsetBlur1 /> <femergenode in=offsetBlur2 /> <femergenode in=SourceGraphic /> <femergenode in=light-effect /> </femerge> </filter>'},function(t,e,n){"use strict";var r=null,o=null,i=window.innerWidth-200,a=window.innerHeight-80,l={BACKGROUND:"rgba(40, 60, 125,0.75)",BORDER:"#2A3454",TEXT:"#C3D1DE"};window.addEventListener("resize",function(){i=window.innerWidth-200,a=window.innerHeight-80}),r=1==d3.select("#__v_tip").size()?d3.select("#__v_tip"):d3.select("body").append("div").attr("id","#__v_tip"),r.style("position","fixed").style("opacity",0).style("padding","5px").style("left","0").style("top","0").style("height","auto").style("width","auto").style("opacity",0).style("pointer-events","none").style("display","block").style("border","1px solid "+l.BORDER).style("background",l.BACKGROUND).style("color",l.TEXT);var s=function(t){window.clearTimeout(o),r.html(t),r.style("opacity",1);var e=d3.event.clientX-48+"px",n="auto",l=d3.event.clientY+16+"px",s="auto";d3.event.clientX>i&&(e="auto",n=i+200-d3.event.clientX+20+"px"),d3.event.clientY>a&&(l="auto",s=a+80-d3.event.clientY+20+"px"),r.style("left",e).style("top",l).style("right",n).style("bottom",s)},u=function(t,e,n){window.clearTimeout(o),r.html(n),r.style("opacity",1);var l=t-48+"px",s="auto",u=e+16+"px",c="auto";t>i&&(l="auto",s=i+200-t+20+"px"),e>a&&(u="auto",c=a+80-e+20+"px"),r.style("left",l).style("top",u).style("right",s).style("bottom",c)},c=function(t){t=t||1e3,window.clearTimeout(o),o=window.setTimeout(function(){r.transition().duration(1e3).style("opacity",0)},t)};t.exports={show:s,hide:c,showBy:u}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a={},l=0,s=0,u=function(){function t(e,n){r(this,t);var i=d3.geoBounds(e),u=o(i,2),c=o(u[0],2);this.left=c[0],this.top=c[1];var f=o(u[1],2);this.right=f[0],this.bottom=f[1];var p=[n.clientWidth,n.clientHeight];l=p[0],s=p[1],window.addEventListener("resize",function(){var t=[n.clientWidth,n.clientHeight];l=t[0],s=t[1]}),e.features.map(function(t){a[t.properties.name]={},a[t.properties.name].id=t.properties.adcode||t.properties.id||t.properties.name,a[t.properties.name].center=d3.geoCentroid(t)})}return i(t,[{key:"getId",value:function(t){return a.hasOwnProperty(t)?a[t].id:null}},{key:"getPoint",value:function(t){return a.hasOwnProperty(t)?a[t].center:null}},{key:"getCenter",value:function(){return[.5*this.left+.5*this.right,.5*this.bottom+.5*this.top]}},{key:"getFullScale",value:function(){return 43.2*(l/s>(this.right-this.left)/(this.bottom-this.top)?s/(this.bottom-this.top):l/(this.right-this.left))}}]),t}();t.exports=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),s=n(1),u=(d3.line().curve(d3.curveCatmullRom).x(function(t){return t[0]}).y(function(t){return t[1]}),function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"setData",value:function(t){if(l.GLOBAL_SVG.selectAll(".v-bar").data([]).exit().remove(),!(t.length<=0)){var e=_.minBy(t,"count").count,n=_.maxBy(t,"count").count,r=d3.scaleLinear().domain([e,n]).range([l.Bar.HeightMin,l.Bar.HeightMax]),o=l.GLOBAL_SVG.selectAll("rect.v-bar").data(t).enter().append("rect").attr("class","v-bar").attr("x",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.area))[0]-l.Bar.Width/2}).attr("y",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.area))[1]}).attr("width",l.Bar.Width).attr("height",0).attr("rx",l.Bar.Radius).attr("ry",l.Bar.Radius);o.transition().duration(l.Bar.Effect).attr("y",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.area))[1]-r(t.count)}).attr("height",function(t){return r(t.count)}),_.isFunction(l.Bar.OnMouserOver)&&o.on("mouseover",function(t){l.Bar.OnMouserOver.call(null,t)}),_.isFunction(l.Bar.OnMouserOut)&&o.on("mouseout",function(t){l.Bar.OnMouserOut.call(null,t)}),_.isFunction(l.Bar.OnClick)&&o.on("click",function(t){l.Bar.OnClick.call(null,t)})}}},{key:"resize",value:function(){l.GLOBAL_SVG.selectAll("rect.v-bar").attr("x",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.area))[0]-l.Bar.Width/2}).attr("y",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.area))[1]})}}]),e}(s));t.exports=new u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),s=n(1),u=d3.line().curve(d3.curveCatmullRom).x(function(t){return t[0]}).y(function(t){return t[1]}),c=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"setData",value:function(t){var e=this;t.map(function(t){t.__id="_line_"+e.GenId()}),l.GLOBAL_SVG.selectAll(".v-group-line").data([]).exit().remove();var n=l.GLOBAL_SVG.selectAll("g.v-group-line").data(t).enter().append("g").attr("class","v-group-line").attr("id",function(t){return t.__id});n.append("path").attr("class","v-line").attr("id",function(t){return t.__id+"_path"}).attr("d",function(t){var e=l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.from)),n=l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.to)),r=[e,[e[0]+(n[0]-e[0])/4,e[1]+(n[1]-e[1])/2],[e[0]+3*(n[0]-e[0])/4,n[1]],n];return u(r)}),n.append("circle").attr("class","v-line-point").attr("r",l.Line.PointRadius).attr("cx",0).attr("cy",0).append("animateMotion").attr("begin","0s").attr("dur",_.random(l.Line.EffectMin,l.Line.EffectMax)/1e3+"s").attr("repeatCount","indefinite").append("mpath").attr("xlink:href",function(t){return"#"+t.__id+"_path"}),_.isFunction(l.Line.OnMouserOver)&&n.on("mouseover",function(t){l.Line.OnMouserOver.call(null,t)}),_.isFunction(l.Line.OnMouserOut)&&n.on("mouseout",function(t){l.Line.OnMouserOut.call(null,t)}),_.isFunction(l.Line.OnClick)&&n.on("click",function(t){l.Line.OnClick.call(null,t)})}},{key:"resize",value:function(){l.GLOBAL_SVG.selectAll("g.v-group-line path").attr("d",function(t){var e=l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.from)),n=l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t.to)),r=[e,[e[0]+(n[0]-e[0])/4,e[1]+(n[1]-e[1])/2],[e[0]+3*(n[0]-e[0])/4,n[1]],n];return u(r)})}}]),e}(s);t.exports=new c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),s=n(1),u=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"setData",value:function(t){l.GLOBAL_SVG.selectAll("circle.v-point").data([]).exit().remove(),l.GLOBAL_SVG.selectAll("circle.v-point").data(t).enter().append("circle").attr("class","v-point").attr("cx",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t))[0]}).attr("cy",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t))[1]-12}).attr("r",l.Point.Start).append("animate").attr("attributeName","r").attr("attributeType","xml").attr("form",l.Point.RadiusMin).attr("to",l.Point.RadiusMax).attr("begin","0s").attr("dur",function(t){return _.random(l.Point.EffectMin,l.Point.EffectMax)/1e3+"s"}).attr("repeatCount","indefinite")}},{key:"resize",value:function(){l.GLOBAL_SVG.selectAll("circle.v-point").attr("cx",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t))[0]}).attr("cy",function(t){return l.GLOBAL_PROJECTION(l.GLOBAL_BUILDER.getPoint(t))[1]-12})}}]),e}(s);t.exports=new u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),u=n(1),c=d3.line().curve(d3.curveCatmullRom).x(function(t){return t[0]}).y(function(t){return t[1]}),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),l(e,[{key:"fly",value:function(t,e,n){_.isString(t)&&(t=s.GLOBAL_PROJECTION(s.GLOBAL_BUILDER.getPoint(t))),_.isString(e)&&(e=s.GLOBAL_PROJECTION(s.GLOBAL_BUILDER.getPoint(e)));var r=[t,e];s.GLOBAL_SVG.append("path").datum(r).attr("class","v-fly-line").transition().duration(_.random(s.Fly.EffectMin,s.Fly.EffectMax)).attrTween("d",function(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1],r=a(t[0],2),o=r[0],i=r[1];return function(t){var r=o,a=i;t>.2&&t<=.8?(r=o+d3.easeSinOut(t-.2)*e,a=i+d3.easeSinIn(t-.2)*n):t>.8&&(r=o+d3.easeSinOut(2*t-1)*e,a=i+d3.easeSinIn(2*t-1)*n);var l=o+d3.easeSinOut(t)*e,s=i+d3.easeSinIn(t)*n;return c([[r,a],[r+(l-r)/3,a+(s-a)/4],[l,s]])}}).on("end",function(){n&&n.call(null)}).remove()}}]),e}(u);t.exports=new f}]);